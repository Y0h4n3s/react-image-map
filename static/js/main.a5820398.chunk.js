!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["@qiuz/react-image-map-main"]=t():e["@qiuz/react-image-map-main"]=t()}(window,function(){return(window["webpackJsonp_@qiuz/react-image-map"]=window["webpackJsonp_@qiuz/react-image-map"]||[]).push([[0],{104:function(e,t,n){e.exports=n(1747)},109:function(e,t,n){},114:function(e,t,n){},119:function(e,t,n){},1747:function(e,t,n){"use strict";n.r(t);var a=n(28),c=n.n(a),o=n(51),r=n(0),i=n.n(r),l=n(18),s=n.n(l);n(109),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(43),m=n(44),f=n(103),p=n(102),d=n(9),g=n(101),h=(n(110),n(31)),v=n.n(h),b=(n(112),n(25)),E=n.n(b),y=n(61),N=n(46),w=n(57),O=n(32),k=(n(114),n(95)),x=n.n(k),S=(n(115),n(58)),_=n.n(S),j=n(1751),C=(n(119),function(e){var t=e.className,n=void 0===t?"":t,a=e.src,c=void 0===a?"":a,o=e.map,r=void 0===o?[]:o,l=e.onMapClick,s=void 0===l?function(e,t){}:l,u=e.onClick,m=void 0===u?function(){}:u,f=function(e,t){return function(){s(e,t)}};return i.a.createElement("div",{className:"image-map__content ".concat(n)},i.a.createElement("img",{src:c,alt:"",onClick:m}),r.map(function(e,t){return i.a.createElement("span",{key:t,className:"".concat(n,"_map_span-").concat(t),style:e,onClick:f(e,t)})}))}),I=n(96),J=n.n(I);new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";function t(e,t,n){var a,c;n?((a=new Date).setTime(a.getTime()+24*n*60*60*1e3),c="; expires="+a.toUTCString()):c="",document.cookie=e+"="+t+c+"; path=/"}function n(n){n=JSON.stringify(n),"session"===e?window.name=n:t("localStorage",n,365)}var a=function(){var t="session"===e?window.name:function(e){var t,n,a=e+"=",c=document.cookie.split(";");for(t=0;t<c.length;t++){for(n=c[t];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(a))return n.substring(a.length,n.length)}return null}("localStorage");return t?JSON.parse(t):{}}();return{length:0,clear:function(){a={},this.length=0,"session"===e?window.name="":t("localStorage","",365)},getItem:function(e){return void 0===a[e]?null:a[e]},key:function(e){var t=0;for(var n in a){if(t===e)return n;t++}return null},removeItem:function(e){delete a[e],this.length--,n(a)},setItem:function(e,t){a[e]=t+"",this.length++,n(a)}}},F=function(){try{return localStorage.setItem("setItemNotWork","true"),localStorage.removeItem("setItemNotWork"),localStorage}catch(e){return console.log(e),z()}}(),q=(new(function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"getItem",value:function(e){var t=F.getItem(e);return"undefined"!==t?JSON.parse(t):void 0}},{key:"setItem",value:function(e,t){F.setItem(e,JSON.stringify(t))}},{key:"removeItem",value:function(e){F.removeItem(e)}},{key:"key",value:function(e){return F.key(e)}},{key:"clear",value:function(){F.clear()}},{key:"length",get:function(){return F.length}}]),e}()),n(97)),A=n.n(q);var R=[{left:"0",top:"6",height:"12",width:"33",href:""}],U={unit:"%",x:0,y:20,height:12,width:33},W=function(e){return e.map(function(e){var t={};return Object.keys(e).forEach(function(n){t[n]="href"!==n?"".concat(parseFloat(e[n]),"%"):e[n]}),t})},B=function(){var e=window.location.href.split("?")[1];return A.a.parse(e)}(),D=B.imgSrc,L=B.postmessage,T=window.__POWERED_BY_QIANKUN__?"/widget":"",P=[{path:"/react-image-map",Component:function(){var e=Object(r.useState)(D||J.a),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(R),o=Object(O.a)(c,2),l=o[0],s=o[1],u=Object(r.useState)(U),m=Object(O.a)(u,2),f=m[0],p=m[1],d=Object(r.useState)(JSON.stringify(W(l))),g=Object(O.a)(d,2),h=g[0],b=g[1],k=Object(r.useState)(JSON.stringify(W(l),null,4)),S=Object(O.a)(k,2),I=S[0],z=S[1];L&&window.addEventListener("message",function(e){console.log(e);var t=e.data;if(t){var n=function(e){var t=[];try{t=JSON.parse(e)}catch(n){console.log(n)}return t}(t);s(n),b(JSON.stringify(W(n))),z(JSON.stringify(W(n),null,4))}},!1),Object(r.useEffect)(function(){var e=document.querySelector(".ReactCrop"),t=function(e){var t=document.querySelector(".ReactCrop__crop-selection");e.target===t&&q("add")()};if(e)return e.addEventListener("dblclick",t),function(){return e.removeEventListener("dblclick",t)}});var F=function(e,t){return function(n){var a=n.target.value,c=l.map(function(n,c){return t===c?Object(w.a)(Object(w.a)({},n),{},Object(N.a)({},e,a)):n});s(c),b(JSON.stringify(W(c))),z(JSON.stringify(W(c),null,4))}},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){var n={},a=[];if("add"===e){var c=f.x,o=f.y;n={width:f.width,height:f.height,left:c,top:o,href:""},a=[].concat(Object(y.a)(l),[n])}else l.splice(t,1),a=Object(y.a)(l);s(a),b(JSON.stringify(W(a))),z(JSON.stringify(W(a),null,4)),E.a.success("success")}},A=function(e,t){var n="click map ".concat(e.href||t+1);console.log(n,e),E.a.info(n)},B=i.a.useMemo(function(){return i.a.createElement(C,{className:"usage-map",src:n,map:W(l),onMapClick:A})},[l,n]);return i.a.createElement("div",{className:"images-map-content"},i.a.createElement("div",{className:"crop-box"},i.a.createElement("div",{className:"map-box"},i.a.createElement("div",{className:"map-box-img"},i.a.createElement(x.a,{src:n,crop:f,ruleOfThirds:!0,onChange:function(e,t){p(t)}}),n&&l.map(function(e,t){return i.a.createElement("span",{className:"crop-item",key:t,style:{width:"".concat(parseFloat(e.width),"%"),height:"".concat(parseFloat(e.height),"%"),left:"".concat(parseFloat(e.left),"%"),top:"".concat(parseFloat(e.top),"%")}})})),i.a.createElement("div",{className:"map-box-img"},B))),n&&l.map(function(e,t){return i.a.createElement("div",{className:"map-area",key:t},i.a.createElement("label",{className:"title"},"map",t+1),i.a.createElement("div",{className:"setting-box"},i.a.createElement("div",{className:"setting-box-item"},i.a.createElement("label",null,"width: "),i.a.createElement("input",{value:parseFloat(e.width),type:"number",onChange:F("width",t)})),i.a.createElement("div",{className:"setting-box-item"},i.a.createElement("label",null,"height: "),i.a.createElement("input",{value:parseFloat(e.height),type:"number",onChange:F("height",t)})),i.a.createElement("div",{className:"setting-box-item"},i.a.createElement("label",null,"left: "),i.a.createElement("input",{value:parseFloat(e.left),type:"number",onChange:F("left",t)})),i.a.createElement("div",{className:"setting-box-item"},i.a.createElement("label",null,"top: "),i.a.createElement("input",{value:parseFloat(e.top),type:"number",onChange:F("top",t)})),i.a.createElement("div",{className:"setting-box-item"},i.a.createElement("label",null,"href: "),i.a.createElement("input",{value:e.href,type:"text",onChange:F("href",t)}))),i.a.createElement("i",{className:"cad-iconfont icon-sub",onClick:q("sub",t)}))}),i.a.createElement("div",{className:"opt-box"},i.a.createElement(v.a,{className:"opt-box-btn",icon:i.a.createElement("i",{className:"cad-iconfont icon-dotted-box"}),onClick:q("add")},"Add map"),i.a.createElement(_.a,{text:h,onCopy:function(){return E.a.success("copy success")}},i.a.createElement(v.a,{className:"opt-box-btn",icon:i.a.createElement("i",{className:"cad-iconfont icon-copy"})},"Copy")),i.a.createElement(_.a,{text:I,onCopy:function(){return E.a.success("copy success")}},i.a.createElement(v.a,{className:"opt-box-btn",icon:i.a.createElement("i",{className:"cad-iconfont icon-copy"})},"Format copy")),i.a.createElement(v.a,{className:"opt-box-btn",icon:i.a.createElement("i",{className:"cad-iconfont icon-image"})},i.a.createElement("input",{type:"file",accept:"image/*",className:"picker-image",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",function(){a(t.result),s([]),p(U)}),t.readAsDataURL(e.target.files[0])}}}),"Select images")),i.a.createElement("textarea",{cols:3,value:h,onChange:function(e){var t=e.target.value,n=[];try{n=JSON.parse(t),s(n),b(JSON.stringify(W(n))),z(JSON.stringify(W(n),null,4)),E.a.success("success")}catch(a){console.log(a),E.a.error(a)}}}),i.a.createElement(v.a,{href:"https://github.com/qiuziz/react-image-map#imagemap",target:"_blank",className:"help-btn",shape:"circle",size:"large",icon:i.a.createElement(j.a,null)}))},exact:!0}],K=function(){return r.createElement(d.d,null,P.map(function(e,t){var n=e.path,a=e.Component,c=e.exact;return r.createElement(d.b,{key:t,path:"".concat(T).concat(n),exact:c,render:function(e){return r.createElement(a,e)}})}),r.createElement(d.a,{to:"".concat(T,"/react-image-map")}))},Q=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.createElement(g.a,null,r.createElement(K,null))}}]),n}(r.Component);n.d(t,"bootstrap",function(){return $}),n.d(t,"mount",function(){return V}),n.d(t,"unmount",function(){return Z});var Y="";function G(e){var t=e.container;s.a.render(i.a.createElement(Q,{prefix:Y}),(t||document).querySelector("#root"))}function M(e){e.onGlobalStateChange(function(t,n){return console.log("[onGlobalStateChange - ".concat(e.name,"]:"),t,n)},!0),e.setGlobalState({ignore:e.name,user:{name:e.name}})}function $(){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[subapp] react app bootstraped");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return(X=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[subapp] props from main framework",t),M(t),G(t);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.container,s.a.unmountComponentAtNode((n||document).querySelector("#root"));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.__POWERED_BY_QIANKUN__&&(Y="/widget",n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__),window.__POWERED_BY_QIANKUN__||G({}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,n){e.exports=n.p+"static/media/example.3373acbe.png"}},[[104,1,2]]])});